; Values are separated by at least one white space before and after comma.
; e.g. 
;   Key = Value , Value , Value
; Values in the DEFAULT section can be read in other sections.
; Avoid using single quote. Please use double quotes only.
; Sections Dataset and Process are mandatory.

[DEFAULT]


[Main]
;lumi                    = 12101
;lumi                    = 19510
lumi                    = 19624
reweight_by_pu          = True
reweight_by_trigger     = True
apply_bdt_regression    = True
;rebin                   = 0


[Process]
; FIXME: pending ZJets 70-100, WJets 100 ext
ZbbHinv105      = 0.6750*0.1512      ,   475881.0 ,   476181.5312 , "#ff00ff"
ZbbHinv115      = 0.5117*0.1512      ,   499999.0 ,   500446.8750 , "#ff00ff"
ZbbHinv125      = 0.3943*0.1512      ,   499999.0 ,   500025.3438 , "#ff00ff"
ZbbHinv135      = 0.3074*0.1512      ,   499999.0 ,   500053.1562 , "#ff00ff"
ZbbHinv145      = 0.2424*0.1512      ,   529999.0 ,   530427.8125 , "#ff00ff"
ZbbHinv150      = 0.2159*0.1512      ,   484879.0 ,   484800.0938 , "#ff00ff"

ZnnH110         = 0.5869*0.200*0.744 ,  1000319.0 ,  1000249.0000 , "#ff0000"
ZnnH115         = 0.5117*0.200*0.703 ,   999998.0 ,  1000952.0625 , "#ff0000"
ZnnH120         = 0.4483*0.200*0.648 ,  1000382.0 ,  1001117.8125 , "#ff0000"
ZnnH125         = 0.3943*0.200*0.577 ,   999999.0 ,  1001196.6875 , "#ff0000"
ZnnH130         = 0.3473*0.200*0.494 ,   999039.0 ,   999389.3750 , "#ff0000"
ZnnH135         = 0.3074*0.200*0.404 ,   998170.0 ,   998509.3750 , "#ff0000"
ZnnH140         = 0.2728*0.200*0.315 ,   999411.0 ,   999974.0625 , "#ff0000"
ZnnH145         = 0.2424*0.200*0.232 ,   999998.0 ,  1000448.0625 , "#ff0000"
ZnnH150         = 0.2159*0.200*0.157 ,   999998.0 ,  1001032.5000 , "#ff0000"

WlnH110         = 1.0600*0.326*0.744 ,   991083.0 ,   992014.7500 , "#cc0066"
WlnH115         = 0.9165*0.326*0.703 ,   999998.0 ,  1001122.0000 , "#cc0066"
WlnH120         = 0.7966*0.326*0.648 ,  1000534.0 ,  1001201.1250 , "#cc0066"
WlnH125         = 0.6966*0.326*0.577 ,   999998.0 ,  1000787.5625 , "#cc0066"
WlnH130         = 0.6095*0.326*0.494 ,   999998.0 ,  1001402.9375 , "#cc0066"
WlnH135         = 0.5351*0.326*0.404 ,  1000430.0 ,  1000749.6875 , "#cc0066"
WlnH140         = 0.4713*0.326*0.315 ,   996353.0 ,   997183.3750 , "#cc0066"
WlnH145         = 0.4164*0.326*0.232 ,   997450.0 ,   998269.4375 , "#cc0066"
WlnH150         = 0.3681*0.326*0.157 ,   993963.0 ,   994857.8750 , "#cc0066"

;-- Use LO cross sections from PREP, apply k-factor = 1.3 (used to be 1.19)
;-- Pier calculates 26.379 for WJetsPtW180
WJetsPtW70      = 428.9*1.3          , 21967532.0 , 21950408.0000 , "#cc3300"
WJetsPtW100     = 228.9*1.3          , 49852179.0 , 49883400.0000 , "#cc3300"
WJetsPtW180     = 26.379*1.3         ,  9694453.0 ,  9702082.0000 , "#cc3300"

WJetsHW         = 228.9*1.3          , 11802519.0 , 11796280.0000 , "#cc3300"

ZJetsPtZ70      = 63.85*1.3*32.9/21.4 , 21911236.0 , 21928422.0000 , "#ffcc00"
ZJetsPtZ100     = 63.85*1.3          , 14160517.0 , 14171300.0000 , "#ffcc00"

ZJetsHT50       = 381.2*1.3          ,  3980977.0 ,  3978979.5000 , "#ffcc00"
ZJetsHT100      = 160.3*1.3          ,  4386643.0 ,  4383989.0000 , "#ffcc00"
ZJetsHT200      = 41.49*1.3*0.95     ,  5055882.0 ,  5054296.5000 , "#ffcc00"
ZJetsHT400      = 5.274*1.3          ,   946927.0 ,   947465.8125 , "#ffcc00"

ZJetsHW         = 63.85*1.3          ,  4876125.0 ,  4873690.0000 , "#ffcc00"

;-- sigma_DY = 3503.71 NNLO, 2950 from PREP
;DYJetsM50       = 3503.71            , 29259496.0 , 29431238.0000 , "#cc9900"

;-- sigma_VV taken from https://twiki.cern.ch/twiki/bin/viewauth/CMS/StandardModelCrossSectionsat8TeV r9
; also check WW https://cdsweb.cern.ch/record/1460099/files/SMP-12-013-pas.pdf
; also check ZZ https://cdsweb.cern.ch/record/1460099/files/SMP-12-014-pas.pdf
; also check MCFM arXiv:1105.0020
WW              = 56.7532            , 10000420.0 , 10007584.0000 , "#cccccc"
WZ              = 33.85              , 10000272.0 , 10008316.0000 , "#cccccc"
ZZ              = 8.297              ,  9799897.0 ,  9809065.0000 , "#cccccc"

TTFullLeptMG    = 234*1.0/9.0        , 11684000.0 , 11692603.0000 , "#0000ff"
TTSemiLeptMG    = 234*4.0/9.0        , 25364796.0 , 25388066.0000 , "#0000ff"
TTHadronicMG    = 234*4.0/9.0        , 24754516.0 , 24738606.0000 , "#0000ff"

TTPowheg        = 234                , 26451021.0 , 26456339.0000 , "#0000ff"

;-- weightMCProd is either -274 or +274. weightMCProd has to be applied. The normalization is currently bogus.
TTMCatNLO       = 234                , 27497564.0 , 27519328.0000 , "#0000ff"

T_s             = 3.79               ,   259960.0 ,   259923.5000 , "#00ffcc"
T_t             = 56.4               ,  3158226.0 ,  3144815.0000 , "#00ffcc"
T_tW            = 11.1               ,   497657.0 ,   498080.5938 , "#00ffcc"
Tbar_s          = 1.76               ,   139973.0 ,   140163.6406 , "#00ffcc"
Tbar_t          = 30.7               ,  1935071.0 ,  1933425.6250 , "#00ffcc"
Tbar_tW         = 11.1               ,   493459.0 ,   493595.9062 , "#00ffcc"

QCDPt50         = 8148778.0          ,  4140351.0 ,  4129977.0000 , "#ff00ff"
QCDPt80         = 1033680.0          ,  5964860.0 ,  5961532.0000 , "#ff00ff"
QCDPt120        = 156293.3           ,  5745728.0 ,  5741214.5000 , "#ff00ff"
QCDPt170        = 34138.15           ,  5394395.0 ,  5391437.5000 , "#ff00ff"
QCDPt300        = 1759.549           ,  5558496.0 ,  5554703.0000 , "#ff00ff"
QCDPt470        = 113.8791           ,  2614846.0 ,  2614799.0000 , "#ff00ff"
QCDPt600        = 26.99210           ,  3966861.0 ,  3964562.7500 , "#ff00ff"
QCDPt800        = 3.550036           ,  3968560.0 ,  3966096.2500 , "#ff00ff"
QCDPt1000       = 0.737844           ,  1964086.0 ,  1962417.7500 , "#ff00ff"
QCDPt1400       = 0.03352235         ,  2000060.0 ,  1998678.7500 , "#ff00ff"
QCDPt1800       = 0.001829005        ,   977585.0 ,   978352.1250 , "#ff00ff"

Data_R          = 1.0                , 25148913.0 , 25148913.0000 , "#000000"
Data_P          = 1.0                , 46905706.0 , 46905706.0000 , "#000000"
Data_METBTag_R  = 1.0                , 25148913.0 , 25148913.0000 , "#000000"
Data_METBTag_P  = 1.0                , 46905706.0 , 46905706.0000 , "#000000"
Data_SingleMu_R = 1.0                , 25148913.0 , 25148913.0000 , "#000000"
Data_SingleMu_P = 1.0                , 46905706.0 , 46905706.0000 , "#000000"
Data_SingleEl_R = 1.0                , 25148913.0 , 25148913.0000 , "#000000"
Data_SingleEl_P = 1.0                , 46905706.0 , 46905706.0000 , "#000000"


[Stitch]
WJetsLHECUT     = "70<=lheV_pt && lheV_pt<100" , "100<=lheV_pt && lheV_pt<180" , "(180<=lheV_pt && lheV_pt<220 && lheNj>1) || (220<=lheV_pt)" , "180<=lheV_pt && lheV_pt<220 && lheNj==1"
WJetsPtW70      =  9657206.0 ,        0.0 ,        0.0 ,        0.0
WJetsPtW100     =        0.0 , 34328632.0 ,  4599844.0 ,   852086.0
WJetsPtW180     =        0.0 ,        0.0 ,  7750128.0 ,        0.0
WJetsLHENORM    = "WJetsPtW70" , "WJetsPtW100" , "WJetsPtW180" , "WJetsPtW100"
WJetsLHECOUNT   = 9657206.0 / 9657206.0 , 34328632.0 / 34328632.0 , 7750128.0 / 12349972.0 , 852086.0 / 852086.0

; ZJetsPtZ100 numbers have to be fixed by hand, therefore so are ZJetsLHECount numbers
ZJetsLHECUT     = "50<=lheHT && lheHT<100 && lheV_pt<100" , "100<=lheHT && lheHT<200 && lheV_pt<100" , "200<=lheHT && lheHT<400 && lheV_pt<100" , "400<=lheHT && lheV_pt<100" , "100<=lheV_pt"
ZJetsPtZ100     =        0.0 ,        0.0 ,        0.0 ,        0.0 , 12201381.0
ZJetsHT50       =   198777.0 ,        0.0 ,        0.0 ,        0.0 ,        0.0
ZJetsHT100      =        0.0 ,   554066.0 ,        0.0 ,        0.0 ,   919167.0
ZJetsHT200      =        0.0 ,        0.0 ,   656079.0 ,        0.0 ,  2104607.0
ZJetsHT400      =        0.0 ,        0.0 ,        0.0 ,   117861.0 ,   499278.0
ZJetsLHENORM    = "ZJetsHT50" , "ZJetsHT100" , "ZJetsHT200" , "ZJetsHT400" , "ZJetsPtZ100"
ZJetsLHECOUNT   = 198777.0 / 198777.0 , 554066.0 / 554066.0 , 656079.0 / 656079.0 , 117861.0 / 117861.0 , 12201381.0 / 15724433.0


[Skim]
; from "srm://stormfe1.pi.infn.it:8444/srm/managerv2?SFN=/cms/store/user/arizzi/"
;tagMC         = "Ntuple_Step1V42_Step2Tag_EDMV42_Step2_V4a_MC"
;tagData       = "Ntuple_Step1V42_Step2Tag_EDMV42_Step2_V4a_Data"
tagMC         = "Ntuple_Step1V42_Step2Tag_EDMV42_Step2_V6_MC"
tagData       = "Ntuple_Step1V42_Step2Tag_EDMV42_Step2_V6_DATA"

;baseline      = "(Vtype==4||Vtype==3||Vtype==2) && METtype1corr.et>100 && abs(hJet_eta[0])<2.5 && abs(hJet_eta[1])<2.5 && hJet_id[0]==1 && hJet_id[1]==1 && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && hJet_pt[0]>20 && hJet_pt[1]>20 && hJet_csv[0]>0 && hJet_csv[1]>0 && (hJet_csv_nominal[0]>0.244 || hJet_csv_nominal[1]>0.244)"
;baseline      = "(Vtype==4||Vtype==3||Vtype==2) && (METtype1corr.et>100 || patchMETtype1corr(METtype1corr.et,METtype1corr.phi,METtype1diff.et,METtype1diff.phi)>100) && abs(hJet_eta[0])<2.5 && abs(hJet_eta[1])<2.5 && hJet_id[0]==1 && hJet_id[1]==1 && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && hJet_pt[0]>20 && hJet_pt[1]>20 && hJet_csv[0]>0 && hJet_csv[1]>0 && (hJet_csv_nominal[0]>0.244 || hJet_csv_nominal[1]>0.244)"
baseline      = "H.HiggsFlag==1 && (Vtype==4||Vtype==3||Vtype==2) && METtype1corr.et>80 && abs(hJet_eta[0])<2.5 && abs(hJet_eta[1])<2.5 && hJet_id[0]==1 && hJet_id[1]==1 && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && hJet_pt[0]>20 && hJet_pt[1]>20 && hJet_csv[0]>0 && hJet_csv[1]>0 && (hJet_csv_nominal[0]>0.244 || hJet_csv_nominal[1]>0.244)"
;regression    = "(Vtype==4||Vtype==3||Vtype==2) && METtype1corr.et>80 && abs(hJet_eta[0])<2.5 && abs(hJet_eta[1])<2.5 && hJet_id[0]==1 && hJet_id[1]==1 && hJet_genPt[0]>15 && hJet_genPt[1]>15 && hJet_pt[0]>15 && hJet_pt[1]>15 && hJet_csv[0]>0.244 && hJet_csv[1]>0.244"
regression    = "(Vtype==4||Vtype==3||Vtype==2) && METtype1corr.et>80 && abs(hJet_eta[0])<2.5 && abs(hJet_eta[1])<2.5 && hJet_id[0]==1 && hJet_id[1]==1 && hJet_genPt[0]>10 && hJet_genPt[1]>10 && abs(hJet_flavour[0])==5 && hJet_pt[0]>20 && hJet_pt[1]>20 && hJet_csv[0]>0 && hJet_csv[1]>0"
;fjregression  = "(Vtype==4||Vtype==3||Vtype==2) && METtype1corr.et>80 && nfathFilterJets>0 && abs(fathFilterJets_eta[0])<2.5 && abs(fathFilterJets_eta[1])<2.5 && fathFilterJets_genPt[0]>10 && fathFilterJets_genPt[1]>10 && (nfathFilterJets<3||fathFilterJets_genPt[2]>0) && abs(fathFilterJets_flavour[0])==5 && fathFilterJets_pt[0]>15 && fathFilterJets_pt[1]>15 && fathFilterJets_csvivf[0]>0 && fathFilterJets_csvivf[1]>0"
fjregression  = "(Vtype==4||Vtype==3||Vtype==2) && METtype1corr.et>80 && FatH.FatHiggsFlag==1 && nfathFilterJets>0 && abs(fathFilterJets_eta[0])<2.5 && abs(fathFilterJets_eta[1])<2.5 && fathFilterJets_genPt[0]>10 && fathFilterJets_genPt[1]>10 && abs(fathFilterJets_flavour[0])==5 && fathFilterJets_pt[0]>15 && fathFilterJets_pt[1]>15 && fathFilterJets_csv[0]>0 && fathFilterJets_csv[1]>0"
;-- triggerFlags id:
; "HLT_IsoMu24_eta2p1_v.*", #23
; "HLT_DiCentralJetSumpT100_dPhi05_DiCentralPFJet60_25_PFMET100_HBHENoiseCleaned_v.*", #39
; "HLT_DiCentralJet20_CaloMET65_BTagCSV07_PFMHT80_v.*", #40  (run2012A)
; "HLT_DiCentralPFJet30_PFMET80_BTagCSV07_v.*", #41 (since run2012B) 
; "HLT_PFMET150_v.*", #42
; "HLT_Ele27_WP80_v.*", #44
; "HLT_DiCentralPFJet30_PFMHT80_v.*", #49 ## (run2012A) 
; "HLT_DiCentralPFJet30_PFMET80_v.*", #50 ## (since run2012B and prescaled) 
; mettrigger should be identical to those in section [Trigger]
mettrigger      = "EVENT.json && ( (190456<=EVENT.run && EVENT.run<=193752 && (triggerFlags[42]==1 || triggerFlags[49]==1 || triggerFlags[40]==1)) || (193752<=EVENT.run && EVENT.run<=208686 && (triggerFlags[42]==1 || triggerFlags[39]==1 || triggerFlags[41]==1)) )"
; metfilter should be identical to METVETO in section [Selection]
metfilter       = "hbhe && ecalFlag && cschaloFlag && hcallaserFlag && trackingfailureFlag && eebadscFlag && !isBadHcalEvent"
; 3 following triggers are used for trigger efficiency
metbtagtrigger  = "EVENT.json && ( (190456<=EVENT.run && EVENT.run<=193752 && (triggerFlags[49]==1)) || (193752<=EVENT.run && EVENT.run<=208686 && (triggerFlags[50]==1)) )"
singlemutrigger = "EVENT.json && ( (190456<=EVENT.run && EVENT.run<=208686 && (triggerFlags[23]==1)) )"
singleeltrigger = "EVENT.json && ( (190456<=EVENT.run && EVENT.run<=208686 && (triggerFlags[44]==1)) )"


[Weight]
;ZnunuHighPt       = "efflumi * PUweight * triggerweight2012ABCD(METtype1corr.et)"
;ZnunuMedPt        = "efflumi * PUweight * triggerweight2012ABCD(METtype1corr.et)"
;ZnunuLowPt        = "efflumi * PUweight * (triggerFlags[41]) * 18618/19510."
;ZnunuLowCSV       = "efflumi * PUweight * triggerweight2012ABCD(METtype1corr.et)"

;ZnunuHighPt       = "efflumi * PUweight * (triggerFlags[42]==1 || triggerFlags[39]==1 || triggerFlags[41]==1)"
;ZnunuMedPt        = "efflumi * PUweight * (triggerFlags[42]==1 || triggerFlags[39]==1 || triggerFlags[41]==1)"
;ZnunuLowPt        = "efflumi * PUweight * (triggerFlags[42]==1 || triggerFlags[39]==1 || triggerFlags[41]==1)"
;ZnunuLowCSV       = "efflumi * PUweight * (triggerFlags[42]==1 || triggerFlags[39]==1 || triggerFlags[41]==1)"

ZnunuHighPt       = "efflumi * PUweight * triggercorr2012ABCD( (triggerFlags[42]==1 || triggerFlags[39]==1), (triggerFlags[41]==1), METtype1corr.et, max(hJet_csv_nominal[0],hJet_csv_nominal[1]) )"
ZnunuMedPt        = "efflumi * PUweight * triggercorr2012ABCD( (triggerFlags[42]==1 || triggerFlags[39]==1), (triggerFlags[41]==1), METtype1corr.et, max(hJet_csv_nominal[0],hJet_csv_nominal[1]) )"
ZnunuLowPt        = "efflumi * PUweight * triggercorr2012ABCD( (triggerFlags[42]==1 || triggerFlags[39]==1), (triggerFlags[41]==1), METtype1corr.et, max(hJet_csv_nominal[0],hJet_csv_nominal[1]) )"
ZnunuLowCSV       = "efflumi * PUweight * triggercorr2012ABCD( (triggerFlags[42]==1 || triggerFlags[39]==1), (triggerFlags[41]==1), METtype1corr.et, max(hJet_csv_nominal[0],hJet_csv_nominal[1]) )"


[Trigger]
ZnunuHighPt       = "EVENT.json && ( (190456<=EVENT.run && EVENT.run<=193752 && (triggerFlags[42]==1 || triggerFlags[49]==1 || triggerFlags[40]==1)) || (193752<=EVENT.run && EVENT.run<=208686 && (triggerFlags[42]==1 || triggerFlags[39]==1 || triggerFlags[41]==1)) )"
ZnunuMedPt        = "EVENT.json && ( (190456<=EVENT.run && EVENT.run<=193752 && (triggerFlags[42]==1 || triggerFlags[49]==1 || triggerFlags[40]==1)) || (193752<=EVENT.run && EVENT.run<=208686 && (triggerFlags[42]==1 || triggerFlags[39]==1 || triggerFlags[41]==1)) )"
ZnunuLowPt        = "EVENT.json && ( (190456<=EVENT.run && EVENT.run<=193752 && (triggerFlags[42]==1 || triggerFlags[49]==1 || triggerFlags[40]==1)) || (193752<=EVENT.run && EVENT.run<=208686 && (triggerFlags[42]==1 || triggerFlags[39]==1 || triggerFlags[41]==1)) )"
ZnunuLowCSV       = "EVENT.json && ( (190456<=EVENT.run && EVENT.run<=193752 && (triggerFlags[42]==1 || triggerFlags[49]==1 || triggerFlags[40]==1)) || (193752<=EVENT.run && EVENT.run<=208686 && (triggerFlags[42]==1 || triggerFlags[39]==1 || triggerFlags[41]==1)) )"


[Selection]
PTBIN             = "METtype1corr.et>170 && H.pt>130 && max(hJet_pt[0],hJet_pt[1])>60 && min(hJet_pt[0],hJet_pt[1])>30"
MEDPTBIN          = "130<METtype1corr.et && METtype1corr.et<=170 && H.pt>130 && max(hJet_pt[0],hJet_pt[1])>60 && min(hJet_pt[0],hJet_pt[1])>30"
LOWPTBIN          = "100<METtype1corr.et && METtype1corr.et<=130 && H.pt>100 && max(hJet_pt[0],hJet_pt[1])>60 && min(hJet_pt[0],hJet_pt[1])>30"
CSVBIN            = "max(hJet_csv_nominal[0],hJet_csv_nominal[1])>0.679 && min(hJet_csv_nominal[0],hJet_csv_nominal[1])>0.244"
LOWCSVBIN         = "max(hJet_csv_nominal[0],hJet_csv_nominal[1])>0.679 && min(hJet_csv_nominal[0],hJet_csv_nominal[1])<=0.244"
;LOWCSVBIN         = "max(hJet_csv_nominal[0],hJet_csv_nominal[1])>0.244 && !(max(hJet_csv_nominal[0],hJet_csv_nominal[1])>0.679 && min(hJet_csv_nominal[0],hJet_csv_nominal[1])>0.244)"
LEPTONVETO        = "nalep_pt5_Znn==0"
JETVETO           = "naJets_Znn==0"
METVETO           = "hbhe && ecalFlag && cschaloFlag && hcallaserFlag && trackingfailureFlag && eebadscFlag && !isBadHcalEvent"

;-- ZnunuHighPt
ZnunuHighPt_VH    = "(Vtype==4) && "%(PTBIN)s" && "%(CSVBIN)s" && H.mass<250 && mindPhiMETJet_dPhi>0.5 && abs(deltaPhi(METtype1corr.phi,METnoPUCh.phi))<0.5 && abs(deltaPhi(H.phi,METtype1corr.phi))>2.0 && "%(LEPTONVETO)s" && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"
ZnunuHighPt_ZjLF  = "(Vtype==4) && "%(PTBIN)s" && max(hJet_csv_nominal[0],hJet_csv_nominal[1])<=0.898 && max(hJet_csv_nominal[0],hJet_csv_nominal[1])>0.244 && H.mass<250 && mindPhiMETJet_dPhi>0.5 && abs(deltaPhi(METtype1corr.phi,METnoPUCh.phi))<0.5 && hJet_nhf[0]<0.90 && hJet_nhf[1]<0.90 && hJet_nef[0]<0.90 && hJet_nef[1]<0.90 && "%(LEPTONVETO)s" && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"
ZnunuHighPt_ZjHF  = "(Vtype==4) && "%(PTBIN)s" && "%(CSVBIN)s" && (H.mass<100 || 140<H.mass) && H.mass<250 && mindPhiMETJet_dPhi>0.5 && abs(deltaPhi(METtype1corr.phi,METnoPUCh.phi))<0.5 && abs(deltaPhi(H.phi,METtype1corr.phi))>2.0 && "%(LEPTONVETO)s" && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"
ZnunuHighPt_WjLF  = "(Vtype==2||Vtype==3) && "%(PTBIN)s" && max(hJet_csv_nominal[0],hJet_csv_nominal[1])<=0.898 && max(hJet_csv_nominal[0],hJet_csv_nominal[1])>0.244 && H.mass<250 && mindPhiMETJet_dPhi>0.5 && "%(JETVETO)s" && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"
ZnunuHighPt_WjHF  = "(Vtype==2||Vtype==3) && "%(PTBIN)s" && "%(CSVBIN)s" && (H.mass<100 || 140<H.mass) && H.mass<250 && mindPhiMETJet_dPhi>0.5 && abs(deltaPhi(H.phi,METtype1corr.phi))>2.0 && "%(JETVETO)s" && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"
ZnunuHighPt_TT    = "(Vtype==2||Vtype==3) && "%(PTBIN)s" && max(hJet_csv_nominal[0],hJet_csv_nominal[1])>0.898 && (H.mass<100 || 140<H.mass) && H.mass<250 && mindPhiMETJet_dPhi>0.5 && naJets_Znn>=1 && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"
;ZnunuHighPt_s_Top = "(Vtype==2||Vtype==3) && "%(PTBIN)s" && max(hJet_csv_nominal[0],hJet_csv_nominal[1])>0.898 && (H.mass<100 || 140<H.mass) && H.mass<250 && mindPhiMETJet_dPhi>0.5 && (Sum$(aJet_pt>30 && 2.5<abs(aJet_eta) && abs(aJet_eta)<4.5 && aJet_id==1 && aJet_puJetIdL>0)==1) && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"

;-- ZnunuMedPt
ZnunuMedPt_VH     = "(Vtype==4) && "%(MEDPTBIN)s" && "%(CSVBIN)s" && H.mass<250 && mindPhiMETJet_dPhi>0.7 && abs(deltaPhi(METtype1corr.phi,METnoPUCh.phi))<0.5 && abs(deltaPhi(H.phi,METtype1corr.phi))>2.0 && "%(LEPTONVETO)s" && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"
ZnunuMedPt_ZjLF   = "(Vtype==4) && "%(MEDPTBIN)s" && max(hJet_csv_nominal[0],hJet_csv_nominal[1])<=0.898 && max(hJet_csv_nominal[0],hJet_csv_nominal[1])>0.244 && H.mass<250 && mindPhiMETJet_dPhi>0.7 && abs(deltaPhi(METtype1corr.phi,METnoPUCh.phi))<0.5 && hJet_nhf[0]<0.90 && hJet_nhf[1]<0.90 && hJet_nef[0]<0.90 && hJet_nef[1]<0.90 && "%(LEPTONVETO)s" && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"
ZnunuMedPt_ZjHF   = "(Vtype==4) && "%(MEDPTBIN)s" && "%(CSVBIN)s" && (H.mass<100 || 140<H.mass) && H.mass<250 && mindPhiMETJet_dPhi>0.7 && abs(deltaPhi(METtype1corr.phi,METnoPUCh.phi))<0.5 && abs(deltaPhi(H.phi,METtype1corr.phi))>2.0 && "%(LEPTONVETO)s" && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"
ZnunuMedPt_WjLF   = "(Vtype==2||Vtype==3) && "%(MEDPTBIN)s" && max(hJet_csv_nominal[0],hJet_csv_nominal[1])<=0.898 && max(hJet_csv_nominal[0],hJet_csv_nominal[1])>0.244 && H.mass<250 && mindPhiMETJet_dPhi>0.7 && "%(JETVETO)s" && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"
ZnunuMedPt_WjHF   = "(Vtype==2||Vtype==3) && "%(MEDPTBIN)s" && "%(CSVBIN)s" && (H.mass<100 || 140<H.mass) && H.mass<250 && mindPhiMETJet_dPhi>0.7 && abs(deltaPhi(H.phi,METtype1corr.phi))>2.0 && "%(JETVETO)s" && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"
ZnunuMedPt_TT     = "(Vtype==2||Vtype==3) && "%(MEDPTBIN)s" && max(hJet_csv_nominal[0],hJet_csv_nominal[1])>0.898 && (H.mass<100 || 140<H.mass) && H.mass<250 && mindPhiMETJet_dPhi>0.7 && naJets_Znn>=1 && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"
;ZnunuMedPt_s_Top  = "(Vtype==2||Vtype==3) && "%(MEDPTBIN)s" && max(hJet_csv_nominal[0],hJet_csv_nominal[1])>0.898 && (H.mass<100 || 140<H.mass) && H.mass<250 && mindPhiMETJet_dPhi>0.7 && (Sum$(aJet_pt>30 && 2.5<abs(aJet_eta) && abs(aJet_eta)<4.5 && aJet_id==1 && aJet_puJetIdL>0)==1) && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"

;-- ZnunuLowPt
ZnunuLowPt_VH     = "(Vtype==4) && "%(LOWPTBIN)s" && "%(CSVBIN)s" && H.mass<250 && mindPhiMETJet_dPhi>0.7 && METtype1corr.et/sqrt(METtype1corr.sumet)>3 && abs(deltaPhi(METtype1corr.phi,METnoPUCh.phi))<0.5 && naJets_Znn<=1 && abs(deltaPhi(H.phi,METtype1corr.phi))>2.0 && "%(LEPTONVETO)s" && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"
ZnunuLowPt_ZjLF   = "(Vtype==4) && "%(LOWPTBIN)s" && max(hJet_csv_nominal[0],hJet_csv_nominal[1])<=0.898 && max(hJet_csv_nominal[0],hJet_csv_nominal[1])>0.244 && H.mass<250 && mindPhiMETJet_dPhi>0.7 && METtype1corr.et/sqrt(METtype1corr.sumet)>3 && abs(deltaPhi(METtype1corr.phi,METnoPUCh.phi))<0.5 && naJets_Znn<=1 && hJet_nhf[0]<0.90 && hJet_nhf[1]<0.90 && hJet_nef[0]<0.90 && hJet_nef[1]<0.90 && "%(LEPTONVETO)s" && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"
ZnunuLowPt_ZjHF   = "(Vtype==4) && "%(LOWPTBIN)s" && "%(CSVBIN)s" && (H.mass<100 || 140<H.mass) && H.mass<250 && mindPhiMETJet_dPhi>0.7 && METtype1corr.et/sqrt(METtype1corr.sumet)>3 && abs(deltaPhi(METtype1corr.phi,METnoPUCh.phi))<0.5 && naJets_Znn<=1 && abs(deltaPhi(H.phi,METtype1corr.phi))>2.0 && "%(LEPTONVETO)s" && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"
ZnunuLowPt_WjLF   = "(Vtype==2||Vtype==3) && "%(LOWPTBIN)s" && max(hJet_csv_nominal[0],hJet_csv_nominal[1])<=0.898 && max(hJet_csv_nominal[0],hJet_csv_nominal[1])>0.244 && H.mass<250 && mindPhiMETJet_dPhi>0.7 && METtype1corr.et/sqrt(METtype1corr.sumet)>3 && "%(JETVETO)s" && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"
ZnunuLowPt_WjHF   = "(Vtype==2||Vtype==3) && "%(LOWPTBIN)s" && "%(CSVBIN)s" && (H.mass<100 || 140<H.mass) && H.mass<250 && mindPhiMETJet_dPhi>0.7 && METtype1corr.et/sqrt(METtype1corr.sumet)>3 && abs(deltaPhi(H.phi,METtype1corr.phi))>2.0 && "%(JETVETO)s" && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"
ZnunuLowPt_TT     = "(Vtype==2||Vtype==3) && "%(LOWPTBIN)s" && max(hJet_csv_nominal[0],hJet_csv_nominal[1])>0.898 && (H.mass<100 || 140<H.mass) && H.mass<250 && mindPhiMETJet_dPhi>0.7 && METtype1corr.et/sqrt(METtype1corr.sumet)>3 && naJets_Znn>=1 && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"
;ZnunuLowPt_s_Top  = "(Vtype==2||Vtype==3) && "%(LOWPTBIN)s" && max(hJet_csv_nominal[0],hJet_csv_nominal[1])>0.898 && (H.mass<100 || 140<H.mass) && H.mass<250 && mindPhiMETJet_dPhi>0.7 && METtype1corr.et/sqrt(METtype1corr.sumet)>3 && (Sum$(aJet_pt>30 && 2.5<abs(aJet_eta) && abs(aJet_eta)<4.5 && aJet_id==1 && aJet_puJetIdL>0)==1) && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"

;-- ZnunuLowCSV (note: tighter mindphi)
ZnunuLowCSV_VH    = "(Vtype==4) && "%(PTBIN)s" && "%(LOWCSVBIN)s" && H.mass<250 && mindPhiMETJet_dPhi>0.7 && abs(deltaPhi(METtype1corr.phi,METnoPUCh.phi))<0.5 && abs(deltaPhi(H.phi,METtype1corr.phi))>2.0 && "%(LEPTONVETO)s" && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"
ZnunuLowCSV_ZjHF  = "(Vtype==4) && "%(PTBIN)s" && "%(LOWCSVBIN)s" && (H.mass<100 || 140<H.mass) && H.mass<250 && mindPhiMETJet_dPhi>0.7 && abs(deltaPhi(METtype1corr.phi,METnoPUCh.phi))<0.5 && abs(deltaPhi(H.phi,METtype1corr.phi))>2.0 && "%(LEPTONVETO)s" && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"
ZnunuLowCSV_WjHF  = "(Vtype==2||Vtype==3) && "%(PTBIN)s" && "%(LOWCSVBIN)s" && (H.mass<100 || 140<H.mass) && H.mass<250 && mindPhiMETJet_dPhi>0.7 && abs(deltaPhi(H.phi,METtype1corr.phi))>2.0 && "%(JETVETO)s" && "%(METVETO)s" && hJet_puJetIdL[0]>0 && hJet_puJetIdL[1]>0 && H.mass>0"


[Mjj Selection]
CSVBIN            = "max(hJet_csv_nominal[0],hJet_csv_nominal[1])>0.898 && min(hJet_csv_nominal[0],hJet_csv_nominal[1])>0.5"
MJJBIN            = "naJets_Znn==0 && abs(deltaPhi(H.phi,METtype1corr.phi))>2.95 && mindPhiMETJet_dPhi>1.5"

ZnunuHighPt_VH    = "H.pt>160 && hJet_pt[0]>80 && "%(CSVBIN)s" && "%(MJJBIN)s" && H.mass>0"
ZnunuMedPt_VH     = "H.pt>130 && hJet_pt[0]>60 && "%(CSVBIN)s" && "%(MJJBIN)s" && H.mass>0"
ZnunuLowPt_VH     = "H.pt>110 && hJet_pt[0]>60 && "%(CSVBIN)s" && "%(MJJBIN)s" && H.mass>0"
ZnunuLowCSV_VH    = "H.pt>160 && hJet_pt[0]>80 && "%(CSVBIN)s" && "%(MJJBIN)s" && H.mass>0"


[Variable]
;-- BDT classification
H_mjj                   = "H.mass"
H_ptjj                  = "H.pt"
H_ptj1                  = "hJet_pt[0]"
H_ptj2                  = "hJet_pt[1]"
H_dRjj                  = "deltaR(hJet_eta[0], hJet_phi[0], hJet_eta[1], hJet_phi[1])"
H_detajj                = "abs(hJet_eta[0]-hJet_eta[1])"
H_dthetapull            = "abs(deltaPullAngle)"
MET                     = "METtype1corr.et"
dphiHMET                = "abs(deltaPhi(H.phi,METtype1corr.phi))"
mindphiMETjets          = "mindPhiMETJet_dPhi"
csvmax                  = "max(hJet_csv_nominal[0],hJet_csv_nominal[1])"
csvmin                  = "min(hJet_csv_nominal[0],hJet_csv_nominal[1])"
Naddjets                = "naJets_Znn"

METphi                  = "METtype1corr.phi"
METsig                  = "METtype1corr.et/sqrt(METtype1corr.sumet)"
METsumet                = "sqrt(METtype1corr.sumet)"
METfancysig             = "METtype1corr.sig"
MET_xyshift             = "MET_xyshift"
METphi_xyshift          = "METphi_xyshift"
minMET                  = "min(METtype1corr.et, METnoPUCh.et)"
;mindphi1                = "min(Min$(abs(deltaPhi(METtype1corr.phi,hJet_phi))),1000*(Sum$(aJet_pt>25 && abs(aJet_eta)<4.5 && aJet_id && aJet_puJetIdL>0)==0)+Min$(abs(deltaPhi(METtype1corr.phi,aJet_phi))+1000*(aJet_pt<=25 || abs(aJet_eta)>=4.5 || !aJet_id || aJet_puJetIdL<=0)))"
;mindphi2                = "min(0+Min$(abs(deltaPhi(METtype1corr.phi,hJet_phi))),1000*(Sum$(aJet_pt>20 && abs(aJet_eta)<2.5)==0)+Min$(abs(deltaPhi(METtype1corr.phi,aJet_phi))+1000*(aJet_pt<=20 || abs(aJet_eta)>=2.5)))"
mindphiMETfwdjets       = "min(Min$(abs(deltaPhi(METtype1corr.phi,hJet_phi))),Min$(abs(deltaPhiMETjets(METtype1corr.phi,aJet_phi,aJet_pt,aJet_eta)))+999*(Sum$(aJet_pt>30 && abs(aJet_eta)<4.5 && aJet_id==1 && aJet_puJetIdL>0)==0) )"
mindphiMETjetsPt40      = "min(Min$(abs(deltaPhi(METtype1corr.phi,hJet_phi))),Min$(abs(deltaPhiMETjets(METtype1corr.phi,aJet_phi,aJet_pt,aJet_eta)))+999*(Sum$(aJet_pt>40 && abs(aJet_eta)<2.5)==0) )"
dphiTrackMET            = "abs(deltaPhi(METtype1corr.phi,METnoPUCh.phi))"
V_pt                    = "V.pt"
V_mass                  = "V.mass"
mtHMET                  = "evalHMETMt(H.pt,H.phi,METtype1corr.et,METtype1corr.phi)"
ptHMET                  = "evalHMETPt(H.pt,H.phi,METtype1corr.et,METtype1corr.phi)"
cosThetaHbb             = "evalCosThetaHbb(hJet_pt[0],hJet_eta[0],hJet_phi[0],hJet_e[0],hJet_pt[1],hJet_eta[1],hJet_phi[1],hJet_e[1])"
HT                      = "Sum$(hJet_pt)+Sum$(aJet_pt*(aJet_pt>30 && abs(aJet_eta)<4.5 && aJet_id==1 && aJet_puJetIdL>0))"
HTV                     = "V.pt+Sum$(hJet_pt)+Sum$(aJet_pt*(aJet_pt>30 && abs(aJet_eta)<4.5 && aJet_id==1 && aJet_puJetIdL>0))"
ptjjOverHT              = "(Sum$(hJet_pt))/((Sum$(hJet_pt))+(Sum$(aJet_pt*(aJet_pt>30 && abs(aJet_eta)<4.5 && aJet_id==1 && aJet_puJetIdL>0))) )"
H_etaj1                 = "hJet_eta[0]"
H_etaj2                 = "hJet_eta[1]"
H_phij1                 = "hJet_phi[0]"
H_phij2                 = "hJet_phi[1]"
H_csvj1                 = "hJet_csv_nominal[0]"
H_csvj2                 = "hJet_csv_nominal[1]"
H_dthetapull2           = "abs(deltaPullAngle2)"
maxajetpt               = "MaxIf$(aJet_pt, abs(aJet_eta)<4.5 && aJet_id==1 && aJet_puJetIdL>0)"
maxajetcsv              = "MaxIf$(aJet_csv_nominal, aJet_pt>30 && abs(aJet_eta)<4.5 && aJet_id==1 && aJet_puJetIdL>0)"
maxptajeteta            = "aJet_eta[0]+999*(Sum$(aJet_pt>30 && abs(aJet_eta)<4.5)==0)"
Naddbjets               = "Sum$(aJet_pt>30 && abs(aJet_eta)<2.5 && aJet_id==1 && aJet_puJetIdL>0 && aJet_csv_nominal>0.244)"
NaddjetsPt40            = "Sum$(aJet_pt>40 && abs(aJet_eta)<4.5 && aJet_id==1 && aJet_puJetIdL>0)"
NaddjetsIdT             = "Sum$(aJet_pt>30 && abs(aJet_eta)<4.5 && aJet_id==1 && aJet_puJetIdL>0 && aJet_nhf<0.90 && aJet_nef<0.90)"
NaddjetsCSV0            = "Sum$(aJet_pt>30 && abs(aJet_eta)<2.5 && aJet_id==1 && aJet_puJetIdL>0 && aJet_csv>0)"
Naddleps                = "nalep_Znn"
NPV                     = "nPVs"

;-- BDT b-jet energy regression
breg_rawpt              = "hJet_ptRaw"
breg_rawptJER           = "smear_pt_res(hJet_ptRaw, hJet_genPt, hJet_eta)"
breg_pt                 = "hJet_pt"
breg_et                 = "evalEt(hJet_pt, hJet_eta, hJet_phi, hJet_e)"
breg_mt                 = "evalMt(hJet_pt, hJet_eta, hJet_phi, hJet_e)"
breg_eta                = "hJet_eta"
breg_leadtrackpt        = "max(0,hJet_ptLeadTrack)"
breg_vtx3dL             = "max(0,hJet_vtx3dL)"
breg_vtx3deL            = "max(0,hJet_vtx3deL)"
breg_vtxMass            = "max(0,hJet_vtxMass)"
breg_vtxPt              = "max(0,hJet_vtxPt)"
breg_chf                = "hJet_chf"
breg_cef                = "hJet_cef"
breg_nhf                = "hJet_nhf"
breg_nef                = "hJet_nef"
breg_nch                = "hJet_nch"
breg_ntot               = "hJet_nconstituents"
breg_eJEC               = "hJet_JECUnc"
breg_softlepptrel       = "max(0,hJet_SoftLeptptRel*(hJet_SoftLeptIdlooseMu==1 || hJet_SoftLeptId95==1))"
breg_softleppt          = "max(0,hJet_SoftLeptPt*(hJet_SoftLeptIdlooseMu==1 || hJet_SoftLeptId95==1))"
breg_softlepdR          = "max(0,hJet_SoftLeptdR*(hJet_SoftLeptIdlooseMu==1 || hJet_SoftLeptId95==1))"

breg_fjrawpt            = "fathFilterJets_ptRaw"
breg_fjrawptJER         = "smear_pt_res(fathFilterJets_ptRaw, fathFilterJets_genPt, fathFilterJets_eta)"
breg_fjpt               = "fathFilterJets_pt"
breg_fjet               = "evalEt(fathFilterJets_pt, fathFilterJets_eta, fathFilterJets_phi, fathFilterJets_e)"
breg_fjmt               = "evalMt(fathFilterJets_pt, fathFilterJets_eta, fathFilterJets_phi, fathFilterJets_e)"
breg_fjeta              = "fathFilterJets_eta"
breg_fjleadtrackpt      = "max(0,fathFilterJets_ptLeadTrack)"
breg_fjvtx3dL           = "max(0,fathFilterJets_vtx3dL)"
breg_fjvtx3deL          = "max(0,fathFilterJets_vtx3deL)"
breg_fjvtxMass          = "max(0,fathFilterJets_vtxMass)"
breg_fjvtxPt            = "max(0,fathFilterJets_vtxPt)"
breg_fjchf              = "fathFilterJets_chf"
breg_fjcef              = "fathFilterJets_cef"
;breg_fjnhf             = "fathFilterJets_nhf"
;breg_fjnef             = "fathFilterJets_nef"
;breg_fjnch             = "fathFilterJets_nch"
breg_fjntot             = "fathFilterJets_nconstituents"
breg_fjeJEC             = "fathFilterJets_JECUnc"
breg_fjsoftlepptrel     = "max(0,fathFilterJets_SoftLeptptRel*(fathFilterJets_SoftLeptIdlooseMu==1 || fathFilterJets_SoftLeptId95==1))"
breg_fjsoftleppt        = "max(0,fathFilterJets_SoftLeptPt*(fathFilterJets_SoftLeptIdlooseMu==1 || fathFilterJets_SoftLeptId95==1))"
breg_fjsoftlepdR        = "max(0,fathFilterJets_SoftLeptdR*(fathFilterJets_SoftLeptIdlooseMu==1 || fathFilterJets_SoftLeptId95==1))"
breg_fjarea             = "fathFilterJets_jetArea"
breg_fjcostheta         = "fathFilterJets_cosTheta"

breg_evt_rho25          = "rho25"

breg_ptReg              = "hJet_ptReg"
breg_fjptReg            = "fathFilterJets_ptReg"


[Histogramming]
H_mjj                   = "M(jj)" , "GeV" , "F" , 24 , 20.0 , 260.0
H_ptjj                  = "p_{T}(jj)" , "GeV" , "F" , 40 , 100.0 , 500.0
H_ptj1                  = "p_{T}(j1)" , "GeV" , "F" , 40 , 50.0 , 450.0
H_ptj2                  = "p_{T}(j2)" , "GeV" , "F" , 25 , 20.0 , 270.0
H_dRjj                  = "#DeltaR(j1,j2)" , "" , "F" , 28 , 0.0 , 3.5
H_detajj                = "#Delta#eta(j1,j2)" , "" , "F" , 15 , 0.0 , 3.0
H_dthetapull            = "#Delta #theta_{pull}(j1,j2)" , "" , "F" , 16 , 0.0 , 3.2
MET                     = "pfMET" , "GeV" , "F" , 40 , 100.0 , 500.0
dphiHMET                = "#Delta#phi(H,MET)" , "" , "F" , 22 , 1.0 , 3.2
mindphiMETjets          = "min #Delta#phi(pfMET,jet)" , "" , "F" , 16 , 0.0 , 3.2
csvmax                  = "CSV max" , "" , "F" , 21 , 0.0 , 1.05
csvmin                  = "CSV min" , "" , "F" , 21 , 0.0 , 1.05
Naddjets                = "# add. jets {p_{T}>30 GeV,|#eta|<4.5}" , "" , "I" , 10 , 0.0 , 10.0

METphi                  = "pfMET phi" , "" , "F" , 16 , -3.2 , 3.2
METsig                  = "pfMET/sqrt(sumET)" , "" , "F" , 20 , 0.0 , 20.0
METsumet                = "sqrt(sumET)" , "sqrt(GeV)" , "F" , 20 , 0.0 , 80.0
METfancysig             = "pfMET fancy significance" , "" , "F" , 30 , 0.0 , 300.0
MET_xyshift             = "x/y-shifted pfMET" , "GeV" , "F" , 40 , 100.0 , 500.0
METphi_xyshift          = "x/y-shifted pfMET phi" , "" , "F" , 16 , -3.2 , 3.2
minMET                  = "min(pfMET, MET_{trk})" , "GeV" , "F" , 25 , 0.0 , 500.0
mindphiMETfwdjets       = "min_{jet |#eta|<4.5} #Delta#phi(pfMET,jet)" , "" , "F" , 16 , 0.0 , 3.2
mindphiMETjetsPt40      = "min_{jet p_{T}>40} #Delta#phi(pfMET,jet)" , "" , "F" , 16 , 0.0 , 3.2
dphiTrackMET            = "abs(#Delta#phi(pfMET,MET_{trk}))" , "" , "F" , 15 , 0.0 , 1.5
V_pt                    = "p_{T}(V)" , "GeV" , "F" , 40 , 100.0 , 500.0
V_mass                  = "m_{T}(V)" , "GeV" , "F" , 25 , 0.0 , 250.0
mtHMET                  = "m_{T}(H,MET)" , "GeV" , "F" , 16 , 200.0 , 1000.0
ptHMET                  = "p_{T}(H,MET)" , "GeV" , "F" , 16 , 0.0 , 800.0
cosThetaHbb             = "cos #theta* (H,b)" , "" , "F" , 20 , -1.0 , 1.0
HT                      = "H_{T}" , "GeV" , "F" , 20 , 100.0 , 500.0
HTV                     = "H_{T} (incl. V)" , "GeV" , "F" , 20 , 200.0 , 1000.0
ptjjOverHT              = "p_{T}(jj) / H_{T}" , "" , "F" , 21 , 0.0 , 1.05
H_etaj1                 = "#eta(j1)" , "" , "F" , 25 , -2.5 , 2.5
H_etaj2                 = "#eta(j2)" , "" , "F" , 25 , -2.5 , 2.5
H_phij1                 = "#phi(j1)" , "" , "F" , 16 , -3.2 , 3.2
H_phij2                 = "#phi(j2)" , "" , "F" , 16 , -3.2 , 3.2
H_csvj1                 = "CSV(j1)" , "" , "F" , 21 , 0.0 , 1.05
H_csvj2                 = "CSV(j2)" , "" , "F" , 21 , 0.0 , 1.05
H_dthetapull2           = "#Delta #theta_{pull,2}(j1,j2)" , "" , "F" , 16 , 0.0 , 3.2 
maxajetpt               = "max p_{T}(add. j)" , "GeV" , "F" , 15 , 0.0 , 300.0
maxajetcsv              = "max CSV(add. j)" , "" , "F" , 21 , 0.0 , 1.05
maxptajeteta            = "#eta(highest-pt add. j)" , "" , "F" , 25 , -2.5 , 2.5
Naddbjets               = "# add. CSVL jets {p_{T}>30 GeV,|#eta|<2.5}" , "" , "I" , 10 , 0.0 , 10.0
NaddjetsPt40            = "# add. jets {p_{T}>40 GeV,|#eta|<4.5}" , "" , "I" , 10 , 0.0 , 10.0
NaddjetsIdT             = "# add. jets {p_{T}>30 GeV,|#eta|<4.5}, Tight jetID" , "" , "I" , 10 , 0.0 , 10.0
NaddjetsCSV0            = "# add. jets {p_{T}>30 GeV,|#eta|<2.5}, CSV>0" , "" , "I" , 10 , 0.0 , 10.0
Naddleps                = "# add. leptons {p_{T}>15 GeV, relIso<0.15}" , "" , "I" , 10 , 0.0 , 10.0
NPV                     = "# primary vertices" , "" , "I" , 25 , 0.0 , 50.0

breg_rawpt              = "raw p_{T}(j)" , "GeV" , "F" , 25 , 0.0 , 500.0
breg_rawptJER           = "raw (JER corr.) p_{T}(j)" , "GeV" , "F" , 25 , 0.0 , 500.0
breg_pt                 = "p_{T}(j)" , "GeV" , "F" , 25 , 0.0 , 500.0
breg_et                 = "E_{T}(j)" , "GeV" , "F" , 25 , 0.0 , 500.0
breg_mt                 = "M_{T}(j)" , "GeV" , "F" , 25 , 0.0 , 500.0
breg_eta                = "#eta(j)" , "" , "F" , 25 , -2.5 , 2.5
breg_leadtrackpt        = "leading track p_{T}(j)" , "GeV" , "F" , 20 , 0.0 , 200.0
breg_vtx3dL             = "sec vtx 3-d flight length(j)" , "cm" , "F" , 20 , 0.0 , 8.0
breg_vtx3deL            = "sec vtx 3-d flight length error(j)" , "cm" , "F" , 21 , 0.0 , 1.05
breg_vtxMass            = "sec vtx mass(j)" , "GeV" , "F" , 20 , 0.0 , 8.0
breg_vtxPt              = "sec vtx p_{T}(j)" , "GeV" , "F" , 20 , 0.0 , 200.0
breg_chf                = "charged hadronic frac(j)" , "" , "F" , 21 , 0.0 , 1.05
breg_cef                = "charged electromagnetic frac(j)" , "" , "F" , 21 , 0.0 , 1.05
breg_nhf                = "neutral hadronic frac(j)" , "" , "F" , 21 , 0.0 , 1.05
breg_nef                = "neutral electromagnetic frac(j)" , "" , "F" , 21 , 0.0 , 1.05
breg_nch                = "# charged particles(j)" , "" , "I" , 25 , 0.0 , 100.0
breg_ntot               = "# particles(j)" , "" , "I" , 25 , 0.0 , 100.0
breg_eJEC               = "JEC uncertainty(j)" , "GeV" , "F" , 20 , 0.0 , 0.02
breg_softlepptrel       = "p_{T, rel}(lep-in-j)" , "GeV" , "F" , 20 , 0.0 , 200.0
breg_softleppt          = "p_{T}(lep-in-j)" , "GeV" , "F" , 20 , 0.0 , 200.0
breg_softlepdR          = "#DeltaR(lep-in-j)" , "" , "F" , 12 , 0.0 , 0.6
breg_fjrawpt            = "raw p_{T}(fj)" , "GeV" , "F" , 25 , 0.0 , 500.0
breg_fjrawptJER         = "raw (JER corr.) p_{T}(fj)" , "GeV" , "F" , 25 , 0.0 , 500.0
breg_fjpt               = "p_{T}(fj)" , "GeV" , "F" , 25 , 0.0 , 500.0
breg_fjet               = "E_{T}(fj)" , "GeV" , "F" , 25 , 0.0 , 500.0
breg_fjmt               = "M_{T}(fj)" , "GeV" , "F" , 25 , 0.0 , 500.0
breg_fjeta              = "#eta(fj)" , "" , "F" , 25 , -2.5 , 2.5
breg_fjleadtrackpt      = "leading track p_{T}(fj)" , "GeV" , "F" , 20 , 0.0 , 200.0
breg_fjvtx3dL           = "sec vtx 3-d flight length(fj)" , "cm" , "F" , 20 , 0.0 , 8.0
breg_fjvtx3deL          = "sec vtx 3-d flight length error(fj)" , "cm" , "F" , 21 , 0.0 , 1.05
breg_fjvtxMass          = "sec vtx mass(fj)" , "GeV" , "F" , 20 , 0.0 , 8.0
breg_fjvtxPt            = "sec vtx p_{T}(fj)" , "GeV" , "F" , 20 , 0.0 , 200.0
breg_fjchf              = "charged hadronic frac(fj)" , "" , "F" , 21 , 0.0 , 1.05
breg_fjcef              = "charged electromagnetic frac(fj)" , "" , "F" , 21 , 0.0 , 1.05
;breg_fjnhf             = "neutral hadronic frac(fj)" , "" , "F" , 21 , 0.0 , 1.05
;breg_fjnef             = "neutral electromagnetic frac(fj)" , "" , "F" , 21 , 0.0 , 1.05
;breg_fjnch             = "# charged particles(fj)" , "" , "I" , 25 , 0.0 , 100.0
breg_fjntot             = "# particles(fj)" , "" , "I" , 25 , 0.0 , 100.0
breg_fjeJEC             = "JEC uncertainty(fj)" , "GeV" , "F" , 20 , 0.0 , 0.02
breg_fjarea             = "jet area(fj)" , "" , "F" , 20 , 0.0 , 1.0
breg_fjcostheta         = "jet cos #theta(fj)" , "" , "F" , 20 , -1.0 , 1.0
breg_fjsoftlepptrel     = "p_{T, rel}(lep-in-fj)" , "GeV" , "F" , 20 , 0.0 , 200.0
breg_fjsoftleppt        = "p_{T}(lep-in-fj)" , "GeV" , "F" , 20 , 0.0 , 200.0
breg_fjsoftlepdR        = "#DeltaR(lep-in-fj)" , "" , "F" , 12 , 0.0 , 0.6
breg_evt_rho25          = "energy density in |#eta|<2.5" , "GeV" , "F" , 35 , 0.0 , 35.0
breg_ptReg              = "regressed p_{T}(j)" , "GeV" , "F" , 25 , 0.0 , 500.0
breg_fjptReg            = "regressed p_{T}(fj)" , "GeV" , "F" , 25 , 0.0 , 500.0


[BDT Variable]
H_mjj                   = "V"
H_ptjj                  = "V"
H_ptj1                  = "V"
H_ptj2                  = "V"
H_dRjj                  = "V"
H_detajj                = "V"
H_dthetapull            = "V"
MET                     = "V"
dphiHMET                = "V"
mindphiMETjets          = "V"
csvmax                  = "V"
csvmin                  = "V"
Naddjets                = "V"

METphi                  = "S"
METsig                  = "S"
METsumet                = "S"
METfancysig             = "S"
MET_xyshift             = "S"
METphi_xyshift          = "S"
minMET                  = "S"
mindphiMETfwdjets       = "S"
mindphiMETjetsPt40      = "S"
dphiTrackMET            = "S"
V_pt                    = "S"
V_mass                  = "S"
mtHMET                  = "S"
ptHMET                  = "S"
cosThetaHbb             = "S"
HT                      = "S"
HTV                     = "S"
H_etaj1                 = "S"
H_etaj2                 = "S"
H_csvj1                 = "S"
H_csvj2                 = "S"
H_dthetapull2           = "S"
maxajetpt               = "S"
maxajetcsv              = "S"
maxptajeteta            = "S"
Naddbjets               = "S"
NaddjetsPt40            = "S"
NaddjetsIdT             = "S"
NaddjetsCSV0            = "S"
Naddleps                = "S"
NPV                     = "S"


[BDT Regression Variable]
breg_rawptJER           = "V"
breg_pt                 = "V"
breg_et                 = "V"
breg_mt                 = "V"
;breg_eta               = "V"
breg_leadtrackpt        = "V"
breg_vtx3dL             = "V"
breg_vtx3deL            = "V"
breg_vtxMass            = "V"
breg_vtxPt              = "V"
;breg_chf               = "V"
breg_cef                = "V"
;breg_nhf               = "V"
;breg_nef               = "V"
;breg_nch               = "V"
breg_ntot               = "V"
breg_eJEC               = "V"
breg_softlepptrel       = "V"
breg_softleppt          = "V"
breg_softlepdR          = "V"
;breg_evt_rho25         = "V"

[BDT Regression FJ Variable]
breg_fjrawptJER         = "V"
breg_fjpt               = "V"
breg_fjet               = "V"
breg_fjmt               = "V"
;breg_fjeta             = "V"
breg_fjleadtrackpt      = "V"
breg_fjvtx3dL           = "V"
breg_fjvtx3deL          = "V"
breg_fjvtxMass          = "V"
breg_fjvtxPt            = "V"
;breg_fjchf             = "V"
;breg_fjcef             = "V"
;breg_fjnhf             = "V"
;breg_fjnef             = "V"
;breg_fjnch             = "V"
breg_fjntot             = "V"
breg_fjeJEC             = "V"
breg_fjarea             = "V"
;breg_fjcostheta        = "V"
;breg_fjsoftlepptrel    = "V"
;breg_fjsoftleppt       = "V"
;breg_fjsoftlepdR       = "V"
;breg_evt_rho25         = "V"

[Systematics]
NONE                                  = "hJet_ptReg" , "hJet_ptReg"
CMS_vhbb_res_j_Znn_8TeVUp             = "hJet_ptReg , HptReg , HmassReg , aJet_pt , METtype1corr.et , METtype1corr.phi , naJets_Znn , mindPhiMETJet_dPhi , mindRHJet_dR , FatHmassReg" , "hJet_ptReg_res_j_up , HptReg_res_j_up , HmassReg_res_j_up , aJet_pt_res_j_up , MET_res_j_up , METphi_res_j_up , naJets_Znn_res_j_up , mindPhiMETJet_dPhi_res_j_up , mindRHJet_dR_res_j_up , FatHmassReg_res_j_up"
CMS_vhbb_res_j_Znn_8TeVDown           = "hJet_ptReg , HptReg , HmassReg , aJet_pt , METtype1corr.et , METtype1corr.phi , naJets_Znn , mindPhiMETJet_dPhi , mindRHJet_dR , FatHmassReg" , "hJet_ptReg_res_j_down , HptReg_res_j_down , HmassReg_res_j_down , aJet_pt_res_j_down , MET_res_j_down , METphi_res_j_down , naJets_Znn_res_j_down , mindPhiMETJet_dPhi_res_j_down , mindRHJet_dR_res_j_down , FatHmassReg_res_j_down"
CMS_vhbb_scale_j_Znn_8TeVUp           = "hJet_ptReg , HptReg , HmassReg , aJet_pt , METtype1corr.et , METtype1corr.phi , naJets_Znn , mindPhiMETJet_dPhi , mindRHJet_dR , FatHmassReg" , "hJet_ptReg_scale_j_up , HptReg_scale_j_up , HmassReg_scale_j_up , aJet_pt_scale_j_up , MET_scale_j_up , METphi_scale_j_up , naJets_Znn_scale_j_up , mindPhiMETJet_dPhi_scale_j_up , mindRHJet_dR_scale_j_up , FatHmassReg_scale_j_up"
CMS_vhbb_scale_j_Znn_8TeVDown         = "hJet_ptReg , HptReg , HmassReg , aJet_pt , METtype1corr.et , METtype1corr.phi , naJets_Znn , mindPhiMETJet_dPhi , mindRHJet_dR , FatHmassReg" , "hJet_ptReg_scale_j_down , HptReg_scale_j_down , HmassReg_scale_j_down , aJet_pt_scale_j_down , MET_scale_j_down , METphi_scale_j_down , naJets_Znn_scale_j_down , mindPhiMETJet_dPhi_scale_j_down , mindRHJet_dR_scale_j_down , FatHmassReg_scale_j_down"
CMS_vhbb_eff_bUp                      = "hJet_csv_nominal , aJet_csv_nominal" , "hJet_csv_upBC , aJet_csv_upBC"
CMS_vhbb_eff_bDown                    = "hJet_csv_nominal , aJet_csv_nominal" , "hJet_csv_downBC , aJet_csv_downBC"
CMS_vhbb_fake_b_8TeVUp                = "hJet_csv_nominal , aJet_csv_nominal" , "hJet_csv_upL , aJet_csv_upL"
CMS_vhbb_fake_b_8TeVDown              = "hJet_csv_nominal , aJet_csv_nominal" , "hJet_csv_downL , aJet_csv_downL"
UEPSUp                                = "PUweight , efflumi" , "PUweightP , efflumi_UEPS_up"
UEPSDown                              = "PUweight , efflumi" , "PUweightM , efflumi_UEPS_down"
CMS_vhbb_trigger_MET_Znn_8TeVUp       = "triggercorr2012ABCD" , "triggercorr2012ABCD_MET_up"
CMS_vhbb_trigger_MET_Znn_8TeVDown     = "triggercorr2012ABCD" , "triggercorr2012ABCD_MET_down"
CMS_vhbb_trigger_METCSV_Znn_8TeVUp    = "triggercorr2012ABCD" , "triggercorr2012ABCD_CSV_up"
CMS_vhbb_trigger_METCSV_Znn_8TeVDown  = "triggercorr2012ABCD" , "triggercorr2012ABCD_CSV_down"

